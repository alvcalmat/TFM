\chapter{Conclusions and future work}
\label{ch:ConclusionsAndFutureWork}

\section{Conclusions}
\label{sec:Conclusions}
%% Comentar los objetivos marcados:
In this work, a task planning approach has been developed with the capability to perform mission planning for multi-\gls{UAV} teams. The system has sufficient cognitive capability to control multiple \glspl{UAV} operating as co-workers in dynamic environments safely. Simulations have demonstrated the system's ability to detect emergency situations and act in a safe way by executing contingency plans autonomously while calculating a new plan to follow that takes into account the unforeseen events that have occurred. The design of the system divided into a centralised block on the ground in charge of optimal mission planning and distributed blocks on board each of the \glspl{ACW} allows the system to be robust to failures and have cognitive capacity enough to react to unforeseen events by recalculating the optimal plan. In this way, an efficient execution of tasks and a better use of resources is achieved, which translates into greater combined autonomy for the \gls{UAV} team.

The system has been designed in \gls{ROS} and the communications between the different software layers and the different blocks of each layer have been carried out using the tools offered by \gls{ROS}. This facilitates the integration of the system developed in other robotics projects that require a task planning system with these or similar characteristics. The use of \glspl{BT} for the design of the \gls{UAV} behaviour manager has great advantages over conventional \glspl{FSM}. This technique makes it possible to generate complex behaviours with numerous states without having to worry about taking into account each of the transitions between these states, as happens with \glspl{FSM}, in which the number of transitions grows exponentially with the number of states. The characteristics of the library used to program this part of the system make it easy to maintain, modify or extend. Moreover, thanks to its modular nature, this block can be reused in parts or in its entirety in any other project. The designed \gls{BT}, although it can be improved, has demonstrated in the simulations that it works quite well, laying the foundations for programming more complex behaviours in the future and serving as an example for the aerial robotics community, which can use it as a starting point for other applications. 

With respect to the block in charge of mission planning, the \emph{High-Level Planner}, it has so far demonstrated the ability to generate coherent plans in the conditions in which it has been tested and has also shown itself capable of recalculating these plans online in reaction to unforeseen events of different natures. The achieved solution is able to plan the mission taking into account imposed constraints such as the type of each \gls{ACW}, the priority of each of the tasks and the battery level of each of the \glspl{UAV}, being able to calculate plans for missions consisting of an indefinite number of tasks and \glspl{ACW}. Regarding the optimality of the plans generated by this block, it must be said that no algorithm has been implemented that performs a search or approximation of the optimal plan, but a solution has been designed based on a cost function that is calculated for each of the \glspl{ACW} with each of the tasks. However, this work is part of a project that will have real applications under defined conditions. Therefore, it is justified to move away from academic analyses that seek to approximate the optimal plan in missions with an indeterminate number of tasks and \glspl{ACW} and instead analyse the planner in scenarios composed of few tasks and \glspl{ACW}. The solution reached, in this context, is a valid approximation towards a planning algorithm that generates a close-to-optimal plan.

\section{Future work}
\label{sec:FutureWork}
As part of the future work, the techniques developed in this work will be validated in a real environment with real equipment. In addition, the system developed in this work will be used as a starting point for a doctoral thesis in which it will be attempted to refine and improve the design of the \emph{Agent Behaviour Manager} block, as well as to develop a planning algorithm that generates a real approximation to the optimal plan for each situation. To this end, random heuristic algorithms will be introduced into the system, as well as the capacity to learn in real time characteristics such as the \glspl{UAV}' battery consumption, thus anticipating unforeseen events and applying contingency plans, thus achieving greater robustness against failures and extending the system's autonomy even further.

A first improvement for the planner with respect to the current version could be the incorporation of reload tasks that, instead of being requested by human operators like the rest of the tasks, would be incorporated by the \emph{High-Level Planner} into the task queue, thus separating emergency reloads or reloads that are executed when an agent is idle from reloads carried out as part of the plan. Implementing this change in the \gls{BT} would mean modifying the \emph{Perform Task Tree} to contemplate this new task in the design of the tree, a change that could be carried out by reusing and slightly adapting the trees used for the \emph{Inspection} and \emph{Safety Monitoring} tasks, taking advantage of the reusability of the \glspl{BT}.

In addition, during the future thesis, it is intended to investigate the use of mixed reality technologies also for inspection applications with multi-\gls{UAV} equipment, combining views taken from different points to recreate more complete visual environments for the operator, and improving the human-machine interaction of the system during collaborative tasks.

\endinput
